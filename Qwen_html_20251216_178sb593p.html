<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–í–Ω—É—Ç—Ä–∏</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    :root {
      --bg: #0c0e16;
      --card: #1a1d2b;
      --accent: #b298dc;
      --accent2: #e6c7a9;
      --text: #f0f0f5;
      --subtext: #a0a7c2;
      --success: #6ee7b7;
      --warning: #fbbf24;
      --calm: #88c9a1;
      --gratitude: #fbbf24;
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }
    body {
      background: linear-gradient(135deg, var(--bg), #131520);
      color: var(--text);
      min-height: 100vh;
      padding: 20px;
      display: none;
      line-height: 1.6;
      overflow-x: hidden;
      transition: background 2s ease;
    }
    #stars-container {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      pointer-events: none;
      z-index: -1;
    }
    .star {
      position: absolute;
      background: white;
      border-radius: 50%;
      animation: twinkle var(--dur, 5s) infinite ease-in-out;
    }
    @keyframes twinkle {
      0%, 100% { opacity: 0.2; transform: scale(1); }
      50% { opacity: 0.8; transform: scale(1.2); }
    }
    .screen {
      display: none;
      max-width: 800px;
      margin: 0 auto;
      animation: fadeIn 0.6s ease;
      position: relative;
      z-index: 10;
    }
    .screen.active {
      display: block;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(12px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .hero {
      text-align: center;
      padding: 40px 0;
    }
    .hero h1 {
      font-size: 2.4rem;
      font-weight: 700;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 12px;
    }
    .hero p {
      color: var(--subtext);
      font-size: 1.1rem;
      max-width: 600px;
      margin: 0 auto;
    }
    .btn {
      background: linear-gradient(120deg, var(--accent), #8a6fc1);
      color: white;
      border: none;
      padding: 14px 32px;
      border-radius: 50px;
      font-weight: 600;
      cursor: pointer;
      margin: 20px 0;
      display: inline-block;
      transition: all 0.3s ease;
      box-shadow: 0 6px 20px rgba(178, 152, 220, 0.2);
      font-size: 1rem;
    }
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(178, 152, 220, 0.35);
    }
    .btn-outline {
      background: transparent;
      border: 2px solid var(--accent);
      box-shadow: none;
    }
    .btn-outline:hover {
      background: rgba(178, 152, 220, 0.1);
    }
    .btn-calm {
      background: linear-gradient(120deg, var(--calm), #5a9e7f);
    }
    .btn-calm:hover {
      box-shadow: 0 8px 25px rgba(136, 201, 161, 0.35);
    }
    .btn-gratitude {
      background: linear-gradient(120deg, var(--gratitude), #d97706);
      color: #000;
    }
    .btn-gratitude:hover {
      box-shadow: 0 8px 25px rgba(251, 191, 36, 0.35);
    }
    .card {
      background: var(--card);
      border-radius: 24px;
      padding: 28px;
      margin: 24px 0;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
      border: 1px solid rgba(255, 255, 255, 0.05);
    }
    .card h2 {
      margin-bottom: 20px;
      font-size: 1.6rem;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .card h2 i {
      color: var(--accent);
    }
    textarea, input {
      width: 100%;
      padding: 16px;
      border-radius: 16px;
      border: 1px solid #333;
      background: #252836;
      color: var(--text);
      margin: 14px 0;
      font-size: 16px;
      resize: vertical;
      min-height: 80px;
    }
    .back {
      color: var(--accent);
      display: inline-block;
      margin-bottom: 24px;
      cursor: pointer;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .back i {
      font-size: 0.9rem;
    }
    .wish-item, .gratitude-item, .letter-item, .bottle-item {
      background: rgba(178, 152, 220, 0.07);
      border-radius: 18px;
      padding: 20px;
      margin: 16px 0;
      position: relative;
    }
    .gratitude-item {
      background: rgba(251, 191, 36, 0.07);
      border-left: 3px solid var(--gratitude);
    }
    .letter-item {
      background: rgba(136, 201, 161, 0.07);
      border-left: 3px solid var(--calm);
    }
    .bottle-item {
      background: rgba(100, 149, 237, 0.07);
      border-left: 3px solid #6495ed;
    }
    .wish-actions {
      margin-top: 16px;
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }
    .wish-actions button {
      flex: 1;
      min-width: 120px;
      padding: 10px;
      font-size: 0.95rem;
    }
    .hidden {
      display: none;
    }
    .meditation-timer {
      font-size: 3rem;
      font-weight: 200;
      text-align: center;
      margin: 20px 0;
      color: var(--calm);
    }
    .meditation-controls {
      display: flex;
      justify-content: center;
      gap: 12px;
      flex-wrap: wrap;
      margin: 16px 0;
    }
    .meditation-option, .sound-option {
      background: rgba(136, 201, 161, 0.1);
      border: 1px solid rgba(136, 201, 161, 0.3);
      color: var(--calm);
      padding: 10px 18px;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 0.95rem;
    }
    .meditation-option.active, .sound-option.active {
      background: rgba(136, 201, 161, 0.3);
      border-color: var(--calm);
    }
    
    /* –î—ã—Ö–∞–Ω–∏–µ */
    .breathing-circle {
      width: 200px;
      height: 200px;
      border-radius: 50%;
      background: rgba(136, 201, 161, 0.15);
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      color: var(--calm);
      transition: transform 4s ease-in-out, background 4s ease;
    }
    .breathing-in { background: rgba(136, 201, 161, 0.3); transform: scale(1.2); }
    .breathing-out { background: rgba(136, 201, 161, 0.1); transform: scale(0.9); }
    
    /* –ö–∞—Ä—Ç–∞ —Ä–æ—Å—Ç–∞ */
    #growth-tree {
      width: 100%;
      max-width: 400px;
      margin: 30px auto;
      display: block;
    }
    .tree-leaf.new, .tree-flower.new {
      animation: bloom 1.5s ease forwards;
    }
    @keyframes bloom {
      from { transform: scale(0); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }
    
    /* –ü–æ—ç—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ */
    .poem-card {
      background: rgba(178, 152, 220, 0.15);
      border-radius: 20px;
      padding: 24px;
      margin: 24px 0;
      font-style: italic;
      text-align: center;
      border-left: 4px solid var(--accent);
    }
    
    footer {
      text-align: center;
      color: var(--subtext);
      padding: 40px 0 20px;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>

<!-- –ó–≤—ë–∑–¥–Ω–æ–µ –Ω–µ–±–æ -->
<div id="stars-container"></div>

<!-- –û–Ω–±–æ—Ä–¥–∏–Ω–≥ -->
<div id="onboarding" class="screen">
  <div class="hero">
    <h1>–í–ù–£–¢–†–ò</h1>
    <p>–¢—ã ‚Äî —Ü–µ–ª–∞—è –≤—Å–µ–ª–µ–Ω–Ω–∞—è. –≠—Ç–æ—Ç —Å–∞–π—Ç ‚Äî —Ç–≤–æ–π —Ü–∏—Ñ—Ä–æ–≤–æ–π —Å–∞–¥.</p>
    <button class="btn" onclick="skipOnboarding()">–í–æ–π—Ç–∏ –≤ —Å–∞–¥</button>
  </div>
</div>

<!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
<div id="home" class="screen">
  <div class="hero">
    <h1>–¢—ã —É–∂–µ –∑–¥–µ—Å—å</h1>
    <p>–í—ã–±–µ—Ä–∏, —á—Ç–æ –ø–æ—Å–∞–¥–∏—Ç—å —Å–µ–≥–æ–¥–Ω—è</p>
  </div>
  <div class="card" onclick="showScreen('test-fears')">
    <h2><i class="fas fa-heartbeat"></i> –¢–µ—Å—Ç –Ω–∞ —Å—Ç—Ä–∞—Ö–∏</h2>
  </div>
  <div class="card" onclick="showScreen('test-strengths')">
    <h2><i class="fas fa-star"></i> –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã</h2>
  </div>
  <div class="card" onclick="showScreen('meditation')">
    <h2><i class="fas fa-spa"></i> –ú–µ–¥–∏—Ç–∞—Ü–∏—è –∏ –¥—ã—Ö–∞–Ω–∏–µ</h2>
  </div>
  <div class="card" onclick="showScreen('gratitude')">
    <h2><i class="fas fa-hand-holding-heart"></i> –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å</h2>
  </div>
  <div class="card" onclick="showScreen('future-letter')">
    <h2><i class="fas fa-envelope"></i> –ü–∏—Å—å–º–æ —Å–µ–±–µ</h2>
  </div>
  <div class="card" onclick="showScreen('growth-map')">
    <h2><i class="fas fa-seedling"></i> –ö–∞—Ä—Ç–∞ —Ä–æ—Å—Ç–∞</h2>
  </div>
  <div class="card" onclick="showScreen('bottle')">
    <h2><i class="fas fa-message"></i> –ü–æ—Å–ª–∞–Ω–∏–µ –≤ –±—É—Ç—ã–ª–∫–µ</h2>
  </div>
  <div class="card" onclick="showScreen('echo')">
    <h2><i class="fas fa-wind"></i> –≠—Ö–æ –∂–µ–ª–∞–Ω–∏–π</h2>
  </div>
</div>

<!-- === –ö–ê–†–¢–ê –†–û–°–¢–ê === -->
<div id="growth-map" class="screen">
  <div class="back" onclick="showScreen('home')"><i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥</div>
  <div class="card">
    <h2><i class="fas fa-tree"></i> –¢–≤–æ—ë –¥–µ—Ä–µ–≤–æ —Ä–æ—Å—Ç–∞</h2>
    <p>–ö–∞–∂–¥–∞—è –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å ‚Äî –ª–∏—Å—Ç. –ö–∞–∂–¥–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ –∂–µ–ª–∞–Ω–∏–µ ‚Äî —Ü–≤–µ—Ç–æ–∫.</p>
    <svg id="growth-tree" viewBox="0 0 200 300">
      <path d="M100,280 Q90,200 100,120 Q80,80 100,40" stroke="#5d4037" stroke-width="8" fill="none"/>
      <circle id="trunk-base" cx="100" cy="280" r="12" fill="#5d4037"/>
      <!-- –õ–∏—Å—Ç—å—è –∏ —Ü–≤–µ—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
    </svg>
    <p class="subtext">–î–µ—Ä–µ–≤–æ —Ä–∞—Å—Ç—ë—Ç —Å —Ç–æ–±–æ–π.</p>
  </div>
</div>

<!-- === –ü–û–°–õ–ê–ù–ò–ï –í –ë–£–¢–´–õ–ö–ï === -->
<div id="bottle" class="screen">
  <div class="back" onclick="showScreen('home')"><i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥</div>
  <div class="card">
    <h2><i class="fas fa-bottle-droplet"></i> –ü–æ—Å–ª–∞–Ω–∏–µ –≤ –±—É—Ç—ã–ª–∫–µ</h2>
    <p>–ù–∞–ø–∏—à–∏ –∫–æ—Ä–æ—Ç–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ. –ß–µ—Ä–µ–∑ 24 —á–∞—Å–∞ –µ–≥–æ –ø–æ–ª—É—á–∏—Ç –∫—Ç–æ-—Ç–æ ‚Äî –∞–Ω–æ–Ω–∏–º–Ω–æ, –∫–∞–∫ –∏ —Ç—ã.</p>
    <textarea id="bottle-text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: ¬´–Ø —Å–µ–≥–æ–¥–Ω—è –≤—ã–∂–∏–ª¬ª"></textarea>
    <button class="btn" onclick="sendBottleMessage()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –æ–∫–µ–∞–Ω</button>
  </div>
  <div class="card">
    <h2>–ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –ø–æ—Å–ª–∞–Ω–∏—è</h2>
    <div id="bottle-list">–ó–¥–µ—Å—å –ø–æ—è–≤—è—Ç—Å—è –ø–æ—Å–ª–∞–Ω–∏—è...</div>
  </div>
</div>

<!-- === –í–°–ï –û–°–¢–ê–õ–¨–ù–´–ï –≠–ö–†–ê–ù–´ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ) === -->
<div id="gratitude" class="screen">
  <div class="back" onclick="showScreen('home')"><i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥</div>
  <div class="card">
    <h2><i class="fas fa-sun"></i> –ó–∞ —á—Ç–æ —è –±–ª–∞–≥–æ–¥–∞—Ä–µ–Ω —Å–µ–≥–æ–¥–Ω—è?</h2>
    <textarea id="gratitude-text" placeholder="–°–µ–≥–æ–¥–Ω—è —è –±–ª–∞–≥–æ–¥–∞—Ä–µ–Ω –∑–∞..."></textarea>
    <button class="btn btn-gratitude" onclick="saveGratitude()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
  </div>
  <div class="card">
    <h2>–¢–≤–æ—è –∏—Å—Ç–æ—Ä–∏—è –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏</h2>
    <div id="gratitude-list">–ü—É—Å—Ç–æ. –ù–∞—á–Ω–∏ —Å–µ–≥–æ–¥–Ω—è!</div>
  </div>
</div>

<div id="future-letter" class="screen">
  <div class="back" onclick="showScreen('home')"><i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥</div>
  <div class="card">
    <h2><i class="fas fa-clock"></i> –ü–∏—Å—å–º–æ —Å–µ–±–µ –≤ –±—É–¥—É—â–µ–µ</h2>
    <textarea id="letter-text" placeholder="–î–æ—Ä–æ–≥–æ–π(–∞—è) —è —á–µ—Ä–µ–∑ –º–µ—Å—è—Ü..."></textarea>
    <p style="margin:16px 0 8px;">–ö–æ–≥–¥–∞ –ø–æ–ª—É—á–∏—Ç—å –ø–∏—Å—å–º–æ?</p>
    <div class="meditation-controls">
      <div class="meditation-option active" data-days="30" onclick="selectLetterDate(30)">–ß–µ—Ä–µ–∑ –º–µ—Å—è—Ü</div>
      <div class="meditation-option" data-days="90" onclick="selectLetterDate(90)">–ß–µ—Ä–µ–∑ 3 –º–µ—Å—è—Ü–∞</div>
      <div class="meditation-option" data-days="180" onclick="selectLetterDate(180)">–ß–µ—Ä–µ–∑ –ø–æ–ª–≥–æ–¥–∞</div>
    </div>
    <button class="btn" onclick="saveFutureLetter()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–µ–±–µ</button>
  </div>
  <div class="card">
    <h2>–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–∏—Å—å–º–∞</h2>
    <div id="letter-list">–ù–µ—Ç –ø–∏—Å–µ–º</div>
  </div>
</div>

<div id="meditation" class="screen">
  <div class="back" onclick="showScreen('home')"><i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥</div>
  <div class="card">
    <h2><i class="fas fa-cloud-sun"></i> –ú–µ–¥–∏—Ç–∞—Ü–∏—è –≤ –ø—Ä–∏—Ä–æ–¥–µ</h2>
    <div style="text-align:center; margin:16px 0;">
      <div class="sound-option active" data-type="rain" onclick="selectSound('rain')">üåßÔ∏è –î–æ–∂–¥—å</div>
      <div class="sound-option" data-type="forest" onclick="selectSound('forest')">üå≥ –õ–µ—Å</div>
      <div class="sound-option" data-type="ocean" onclick="selectSound('ocean')">üåä –û–∫–µ–∞–Ω</div>
      <div class="sound-option" data-type="breathing" onclick="selectSound('breathing')">üå¨Ô∏è –î—ã—Ö–∞–Ω–∏–µ</div>
    </div>
    <p style="text-align:center; color:var(--subtext); margin:10px 0;">–í—ã–±–µ—Ä–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</p>
    <div class="meditation-timer" id="meditation-time">05:00</div>
    <div class="meditation-controls">
      <div class="meditation-option active" data-min="5" onclick="selectMeditationTime(5)">5 –º–∏–Ω</div>
      <div class="meditation-option" data-min="10" onclick="selectMeditationTime(10)">10 –º–∏–Ω</div>
      <div class="meditation-option" data-min="15" onclick="selectMeditationTime(15)">15 –º–∏–Ω</div>
    </div>
    <div id="breathing-container" class="hidden">
      <div class="breathing-circle" id="breathing-circle">–í–¥–æ—Ö</div>
    </div>
    <div style="text-align:center; margin-top:24px;">
      <button class="btn btn-calm" id="btn-start-meditation" onclick="startMeditation()">–ù–∞—á–∞—Ç—å</button>
      <button class="btn btn-outline hidden" id="btn-stop-meditation" onclick="stopMeditation()">–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
    </div>
  </div>
</div>

<!-- –¢–ï–°–¢–´, –≠–•–û ‚Äî –∫–∞–∫ —Ä–∞–Ω—å—à–µ -->
<div id="test-fears" class="screen">
  <div class="back" onclick="showScreen('home')"><i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥</div>
  <div class="card">
    <h2><i class="fas fa-shield-alt"></i> –¢–µ—Å—Ç: –¢–≤–æ–π –≥–ª–∞–≤–Ω—ã–π —Å—Ç—Ä–∞—Ö</h2>
    <p>–û—Ç–≤–µ—Ç—å —á–µ—Å—Ç–Ω–æ. –ù–µ—Ç ¬´–ø–ª–æ—Ö–∏—Ö¬ª –æ—Ç–≤–µ—Ç–æ–≤ ‚Äî —Ç–æ–ª—å–∫–æ —Ç–≤–æ—è –ø—Ä–∞–≤–¥–∞.</p>
    <div id="fear-questions"></div>
    <button class="btn hidden" id="btn-fear-submit" onclick="submitFearTest()">–ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç</button>
  </div>
</div>

<div id="test-strengths" class="screen">
  <div class="back" onclick="showScreen('home')"><i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥</div>
  <div class="card">
    <h2><i class="fas fa-bolt"></i> –ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è —Å–∏–ª</h2>
    <p>–û—Ç–º–µ—Ç—å, —á—Ç–æ —Ç–µ–±–µ –±–ª–∏–∑–∫–æ. –ù–µ –¥—É–º–∞–π ‚Äî —á—É–≤—Å—Ç–≤—É–π.</p>
    <div id="strength-questions"></div>
    <button class="btn hidden" id="btn-strength-submit" onclick="submitStrengthTest()">–£–≤–∏–¥–µ—Ç—å —Å–∏–ª—ã</button>
  </div>
</div>

<div id="echo" class="screen">
  <div class="back" onclick="showScreen('home')"><i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥</div>
  <div class="card">
    <h2><i class="fas fa-paper-plane"></i> –û—Ç–ø—Ä–∞–≤—å –∂–µ–ª–∞–Ω–∏–µ</h2>
    <textarea id="wish-text" placeholder="–ú–æ—ë –∂–µ–ª–∞–Ω–∏–µ..."></textarea>
    <button class="btn" onclick="sendWish()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –≠—Ö–æ</button>
  </div>
  <div class="card">
    <h2><i class="fas fa-hands-helping"></i> –ñ–µ–ª–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª–Ω–∏—Ç—å</h2>
    <div id="wishes-list">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
  </div>
</div>

<div id="fear-result" class="screen">
  <div class="back" onclick="showScreen('home')"><i class="fas fa-arrow-left"></i> –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</div>
  <div class="card">
    <h2><i class="fas fa-eye"></i> –¢–≤–æ–π –≥–ª–∞–≤–Ω—ã–π —Å—Ç—Ä–∞—Ö</h2>
    <div class="result-box" id="fear-result-text"></div>
    <div class="poem-card" id="fear-poem"></div>
    <button class="btn" onclick="showScreen('home')">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø—É—Ç—å</button>
  </div>
</div>

<div id="strength-result" class="screen">
  <div class="back" onclick="showScreen('home')"><i class="fas fa-arrow-left"></i> –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</div>
  <div class="card">
    <h2><i class="fas fa-crown"></i> –¢–≤–æ–∏ —Å–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã</h2>
    <div id="strength-tags"></div>
    <div class="poem-card" id="strength-poem"></div>
    <button class="btn" onclick="showScreen('home')">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø—É—Ç—å</button>
  </div>
</div>

<footer>
  –í–Ω—É—Ç—Ä–∏ ‚Ä¢ –¢—ã —É–∂–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ
</footer>

<script>
  // === –ó–í–Å–ó–î–ù–û–ï –ù–ï–ë–û ===
  function createStars() {
    const container = document.getElementById('stars-container');
    for (let i = 0; i < 300; i++) {
      const star = document.createElement('div');
      star.className = 'star';
      const size = Math.random() * 3;
      star.style.width = star.style.height = size + 'px';
      star.style.left = Math.random() * 100 + 'vw';
      star.style.top = Math.random() * 100 + 'vh';
      star.style.setProperty('--dur', Math.random() * 10 + 5 + 's');
      star.style.opacity = Math.random() * 0.5 + 0.1;
      container.appendChild(star);
    }
  }

  // –ü–∞—Ä–∞–ª–ª–∞–∫—Å
  document.addEventListener('mousemove', (e) => {
    const x = (e.clientX / window.innerWidth - 0.5) * 20;
    const y = (e.clientY / window.innerHeight - 0.5) * 20;
    document.querySelectorAll('.star').forEach(star => {
      const size = parseFloat(star.style.width);
      star.style.transform = `translate(${-x * (size/3)}px, ${-y * (size/3)}px)`;
    });
  });

  // === –≠–ú–û–¶–ò–û–ù–ê–õ–¨–ù–´–ô –§–û–ù ===
  function setEmotionBackground(emotion) {
    const body = document.body;
    let gradient;
    switch(emotion) {
      case 'gratitude': 
        gradient = 'linear-gradient(135deg, #e6c7a9, #fbbf24)'; 
        break;
      case 'fear': 
        gradient = 'linear-gradient(135deg, #2c1e5d, #0c0e16)'; 
        break;
      case 'hope': 
        gradient = 'linear-gradient(135deg, #88c9a1, #b298dc)'; 
        break;
      case 'calm': 
        gradient = 'linear-gradient(135deg, #0f343e, #1a5d63)'; 
        break;
      default: 
        gradient = 'linear-gradient(135deg, #0c0e16, #131520)';
    }
    body.style.background = gradient;
  }

  // === –ü–û–≠–ó–ò–Ø ===
  const fearPoems = {
    "–°—Ç—Ä–∞—Ö –Ω–µ—É–¥–∞—á–∏": "–¢—ã –±–æ–∏—à—å—Å—è –Ω–µ—É–¥–∞—á–∏ ‚Äî –Ω–æ –∏–º–µ–Ω–Ω–æ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç —Ç–≤–æ–∏ –ø–æ–±–µ–¥—ã —Ç–∞–∫–∏–º–∏ –Ω–∞—Å—Ç–æ—è—â–∏–º–∏. –¢–≤–æ—è —Ç—Ä–µ–≤–æ–≥–∞ ‚Äî –∑–∞–±–æ—Ç–∞ –æ –±—É–¥—É—â–µ–º. –ù–æ –±—É–¥—É—â–µ–µ –µ—â—ë –Ω–µ –Ω–∞—Å—Ç—É–ø–∏–ª–æ.",
    "–°—Ç—Ä–∞—Ö –æ—Ç–≤–µ—Ä–∂–µ–Ω–∏—è": "–¢—ã –±–æ–∏—à—å—Å—è, —á—Ç–æ —Ç–µ–±—è –Ω–µ –ø—Ä–∏–º—É—Ç ‚Äî –Ω–æ —Ç–≤–æ—è —É—è–∑–≤–∏–º–æ—Å—Ç—å —É–∂–µ –¥–µ–ª–∞–µ—Ç —Ç–µ–±—è –¥–æ—Å—Ç–æ–π–Ω—ã–º –ª—é–±–≤–∏. –¢—ã –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–¥–µ–∞–ª—å–Ω—ã–º, —á—Ç–æ–±—ã –±—ã—Ç—å –≤–∞–∂–Ω—ã–º.",
    "–°—Ç—Ä–∞—Ö –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–∞": "–¢—ã —Ü–µ–Ω–∏—à—å —Å–≤—è–∑—å ‚Äî —ç—Ç–æ –¥–∞—Ä. –ù–æ –¥–∞–∂–µ –∑–≤—ë–∑–¥—ã —Å–≤–µ—Ç—è—Ç –≤ –æ–¥–∏–Ω–æ—á–∫—É –∏ –Ω–µ —Ç–µ—Ä—è—é—Ç —Å–≤–µ—Ç. –¢—ã ‚Äî —É–∂–µ —Ü–µ–ª–∞—è –≤—Å–µ–ª–µ–Ω–Ω–∞—è.",
    "–°—Ç—Ä–∞—Ö —Ö–∞–æ—Å–∞": "–¢—ã –±–æ–∏—à—å—Å—è –ø–æ—Ç–µ—Ä—è—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª—å ‚Äî –Ω–æ –∂–∏–∑–Ω—å –Ω–µ –≤ –ø–æ—Ä—è–¥–∫–µ, –∞ –≤ –¥–æ–≤–µ—Ä–∏–∏. –ü–æ–∑–≤–æ–ª—å —Å–µ–±–µ –∏–Ω–æ–≥–¥–∞ –Ω–µ –∑–Ω–∞—Ç—å ‚Äî —ç—Ç–æ —Ç–æ–∂–µ –º—É–¥—Ä–æ—Å—Ç—å."
  };

  const strengthPoems = {
    "–≠–º–ø–∞—Ç–∏—è": "–¢—ã —á—É–≤—Å—Ç–≤—É–µ—à—å —Å–µ—Ä–¥—Ü–µ–º ‚Äî –∏ —ç—Ç–æ –º–æ—Å—Ç –º–µ–∂–¥—É –ª—é–¥—å–º–∏. –¢–≤–æ—è —Å–∏–ª–∞ ‚Äî –≤ —Ç–æ–º, —á—Ç–æ —Ç—ã –Ω–µ –±–æ–∏—à—å—Å—è –±—ã—Ç—å –ø—Ä–æ–≤–æ–¥–Ω–∏–∫–æ–º —Å–≤–µ—Ç–∞.",
    "–°—Ç–æ–π–∫–æ—Å—Ç—å": "–¢—ã –∏–¥—ë—à—å, –¥–∞–∂–µ –∫–æ–≥–¥–∞ —Ç—Ä—É–¥–Ω–æ ‚Äî –∏ —ç—Ç–æ —É–∂–µ –ø–æ–¥–≤–∏–≥. –¢–≤–æ—è —Å–∏–ª–∞ ‚Äî –≤ —É–ø—Ä—è–º–æ–π –Ω–∞–¥–µ–∂–¥–µ, —á—Ç–æ –∑–∞–≤—Ç—Ä–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–Ω–∞—á–µ.",
    "–û—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç—å": "–¢—ã –≤–∏–¥–∏—à—å –º–∏—Ä ‚Äî –∏ —ç—Ç–æ —É–∂–µ –∏—Å–∫—É—Å—Å—Ç–≤–æ. –¢–≤–æ—è —Å–∏–ª–∞ ‚Äî –≤ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∑–∞–º–µ—á–∞—Ç—å –∫—Ä–∞—Å–æ—Ç—É –≤ –æ–±—ã–¥–µ–Ω–Ω–æ–º."
  };

  // === –ö–ê–†–¢–ê –†–û–°–¢–ê (SVG) ===
  function updateGrowthTree() {
    const tree = document.getElementById('growth-tree');
    // –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ
    document.querySelectorAll('.tree-leaf, .tree-flower').forEach(el => el.remove());
    
    // –î–æ–±–∞–≤–∏—Ç—å –ª–∏—Å—Ç—å—è –∑–∞ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏
    const gratitudes = JSON.parse(localStorage.getItem('gratitude') || '[]');
    gratitudes.forEach((_, i) => {
      const leaf = document.createElementNS("http://www.w3.org/2000/svg", "circle");
      leaf.classList.add('tree-leaf', 'new');
      leaf.setAttribute('cx', 80 + Math.random() * 40);
      leaf.setAttribute('cy', 80 + Math.random() * 80);
      leaf.setAttribute('r', 5 + Math.random() * 3);
      leaf.setAttribute('fill', '#88c9a1');
      tree.appendChild(leaf);
    });
    
    // –î–æ–±–∞–≤–∏—Ç—å —Ü–≤–µ—Ç—ã –∑–∞ –∂–µ–ª–∞–Ω–∏—è
    const wishes = JSON.parse(localStorage.getItem('wishes') || '[]');
    wishes.filter(w => w.fulfilled).forEach((_, i) => {
      const flower = document.createElementNS("http://www.w3.org/2000/svg", "circle");
      flower.classList.add('tree-flower', 'new');
      flower.setAttribute('cx', 100 + Math.random() * 60 - 30);
      flower.setAttribute('cy', 60 + Math.random() * 60);
      flower.setAttribute('r', 6);
      flower.setAttribute('fill', '#fbbf24');
      tree.appendChild(flower);
    });
  }

  // === –ü–û–°–õ–ê–ù–ò–ï –í –ë–£–¢–´–õ–ö–ï ===
  function sendBottleMessage() {
    const text = document.getElementById('bottle-text').value.trim();
    if (!text) { alert('–ù–∞–ø–∏—à–∏ –ø–æ—Å–ª–∞–Ω–∏–µ'); return; }
    let messages = JSON.parse(localStorage.getItem('bottleMessages') || '[]');
    messages.push({ text, sent: Date.now() });
    localStorage.setItem('bottleMessages', JSON.stringify(messages));
    document.getElementById('bottle-text').value = '';
    alert('–ü–æ—Å–ª–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –æ–∫–µ–∞–Ω. –ö—Ç–æ-—Ç–æ –ø–æ–ª—É—á–∏—Ç –µ–≥–æ —á–µ—Ä–µ–∑ 24 —á–∞—Å–∞.');
    loadBottleMessages();
    
    // –ò–º–∏—Ç–∞—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ 5 —Å–µ–∫ (–¥–ª—è –¥–µ–º–æ)
    setTimeout(() => {
      const all = JSON.parse(localStorage.getItem('bottleMessages') || '[]');
      if (all.length > 1) {
        const random = all[Math.floor(Math.random() * (all.length - 1))];
        alert(`üì¨ –ü—Ä–∏—à–ª–æ –ø–æ—Å–ª–∞–Ω–∏–µ –∏–∑ –æ–∫–µ–∞–Ω–∞:\n\n"${random.text}"`);
      }
    }, 5000);
  }

  function loadBottleMessages() {
    const messages = JSON.parse(localStorage.getItem('bottleMessages') || '[]');
    const el = document.getElementById('bottle-list');
    if (messages.length === 0) {
      el.innerHTML = '<p class="subtext">–ü–æ–∫–∞ –Ω–∏–∫—Ç–æ –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏–ª –ø–æ—Å–ª–∞–Ω–∏–µ...</p>';
      return;
    }
    el.innerHTML = messages.map(m => 
      `<div class="bottle-item">¬´${m.text}¬ª<div class="subtext">–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: ${new Date(m.sent).toLocaleDateString()}</div></div>`
    ).join('');
  }

  // === –û–°–¢–ê–õ–¨–ù–û–ô –ö–û–î (—Ç–µ—Å—Ç—ã, –º–µ–¥–∏—Ç–∞—Ü–∏—è –∏ —Ç.–¥. ‚Äî –∫–∞–∫ –≤ –ø—Ä–æ—à–ª–æ–π –≤–µ—Ä—Å–∏–∏) ===
  // ... (–≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏: skipOnboarding, showScreen, saveGratitude, startMeditation –∏ —Ç.–¥.)

  // –î–ª—è –∫—Ä–∞—Ç–∫–æ—Å—Ç–∏ –∑–¥–µ—Å—å –Ω–µ –¥—É–±–ª–∏—Ä—É—é ‚Äî –æ–Ω–∏ —Ç–∞–∫–∏–µ –∂–µ, –∫–∞–∫ –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —Ñ–∞–π–ª–µ.
  // –ù–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤—ã–∑—ã–≤–∞–π setEmotionBackground() –∏ updateGrowthTree() –≤ –Ω—É–∂–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö!

  // –ü—Ä–∏–º–µ—Ä:
  function saveGratitude() {
    const text = document.getElementById('gratitude-text').value.trim();
    if (!text) { alert('–ù–∞–ø–∏—à–∏, –∑–∞ —á—Ç–æ –±–ª–∞–≥–æ–¥–∞—Ä–µ–Ω'); return; }
    const today = new Date().toLocaleDateString('ru-RU');
    let list = JSON.parse(localStorage.getItem('gratitude') || '[]');
    list.push({ text, date: today });
    localStorage.setItem('gratitude', JSON.stringify(list));
    document.getElementById('gratitude-text').value = '';
    setEmotionBackground('gratitude');
    updateGrowthTree();
    loadGratitude();
  }

  function submitFearTest() {
    const counts = {};
    window.fearAnswers.forEach(a => counts[a] = (counts[a] || 0) + 1);
    let max = Object.keys(counts).reduce((a, b) => counts[a] > counts[b] ? a : b);
    let fearType = fearTypes[max] || fearTypes["–Ω–µ —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è"];
    
    document.getElementById('fear-result-text').innerHTML = `<div class="fear-tag">${fearType.name}</div><p style="margin-top:16px;">${fearType.desc}</p>`;
    document.getElementById('fear-poem').textContent = fearPoems[fearType.name] || "–¢—ã –≤–∏–¥–∏—à—å —Å–≤–æ–π —Å—Ç—Ä–∞—Ö ‚Äî –∞ –∑–Ω–∞—á–∏—Ç, —Ç—ã —É–∂–µ —Å–∏–ª—å–Ω–µ–µ –Ω–µ–≥–æ.";
    
    setEmotionBackground('fear');
    showScreen('fear-result');
  }

  function fulfillWish(id) {
    let wishes = JSON.parse(localStorage.getItem('wishes') || '[]');
    const wish = wishes.find(w => w.id == id);
    if (wish && !wish.fulfilled) {
      wish.fulfilled = true;
      localStorage.setItem('wishes', JSON.stringify(wishes));
      updateGrowthTree();
      alert('–°–ø–∞—Å–∏–±–æ! –¢—ã —Ç–æ–ª—å–∫–æ —á—Ç–æ –∏—Å–ø–æ–ª–Ω–∏–ª —á—É–∂–æ–µ –∂–µ–ª–∞–Ω–∏–µ ‚ù§Ô∏è');
      loadWishes();
    }
  }

  // === –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ===
  if (localStorage.getItem('onboardingDone')) {
    document.body.style.display = 'block';
    showScreen('home');
    createStars();
    updateGrowthTree();
  } else {
    document.body.style.display = 'block';
    showScreen('onboarding');
    createStars();
  }

  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (renderFearTest, startMeditation –∏ —Ç.–¥.) ‚Äî –∫–∞–∫ –≤ –ø—Ä–æ—à–ª–æ–º –∫–æ–¥–µ
  // (–ø–æ–ª–Ω—ã–π –∫–æ–¥ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏—Ö ‚Äî –∑–¥–µ—Å—å –æ–ø—É—â–µ–Ω—ã –¥–ª—è —É–∫–ª–∞–¥–∫–∏ –≤ –ª–∏–º–∏—Ç)

  // –í–ê–ñ–ù–û: –¥–ª—è –ø–æ–ª–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å–∫–æ–ø–∏—Ä—É–π –≤–µ—Å—å –ø—Ä–µ–¥—ã–¥—É—â–∏–π JS-–∫–æ–¥ –∏ –≤—Å—Ç–∞–≤—å —Å—é–¥–∞,
  // –∑–∞–º–µ–Ω–∏–≤ —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (saveGratitude, submitFearTest –∏ —Ç.–¥.) –Ω–∞ —ç—Ç–∏.
</script>

</body>
</html>